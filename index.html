<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FC 26 Fikst√ºr Olu≈üturucu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --ease-out-quint: cubic-bezier(0.22, 1, 0.36, 1);
            --ease-in-out-cubic: cubic-bezier(0.65, 0, 0.35, 1);
        }
        
        * {
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #334155 50%, #1e293b 75%, #0f172a 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: #fff;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .page {
            min-height: 100vh;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            transition: opacity 0.4s var(--ease-in-out-cubic), transform 0.4s var(--ease-in-out-cubic);
            will-change: opacity, transform;
        }
        
        .hidden {
            opacity: 0;
            pointer-events: none;
            z-index: -1;
        }
        
        .page-enter { animation: page-enter 0.5s var(--ease-out-quint) forwards; }
        .page-exit { animation: page-exit 0.5s var(--ease-in-out-cubic) forwards; }

        @keyframes page-enter {
            from { opacity: 0; transform: scale(0.97); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes page-exit {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(1.03); }
        }

        /* Typography Enhancements */
        .responsive-title {
            font-size: clamp(2rem, 8vw, 4rem);
            line-height: 1.1;
            background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 50%, #cbd5e1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            font-weight: 800;
        }
        
        .responsive-subtitle {
            font-size: clamp(1.125rem, 3vw, 1.5rem);
            line-height: 1.4;
            background: linear-gradient(135deg, #f1f5f9 0%, #cbd5e1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }
        
        .responsive-text {
            font-size: clamp(0.875rem, 2.5vw, 1.125rem);
            line-height: 1.6;
            color: #94a3b8;
            font-weight: 500;
        }
        
        /* Enhanced Icons */
        .icon-enhanced {
            font-size: clamp(3rem, 8vw, 4rem);
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            transition: all 0.3s var(--ease-out-quint);
            display: inline-block;
        }
        
        .icon-enhanced:hover {
            transform: scale(1.1) rotate(5deg);
            filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.4));
        }
        
        .icon-football {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #ffcc02 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 4px 12px rgba(255, 107, 53, 0.4));
        }
        
        .icon-world {
            background: linear-gradient(135deg, #22d3ee 0%, #06b6d4 50%, #0891b2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 4px 12px rgba(34, 211, 238, 0.4));
        }
        
        .icon-trophy {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .icon-lightning {
            background: linear-gradient(135deg, #22d3ee 0%, #06b6d4 50%, #0891b2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Frosted Glass Stili */
        .glass-pane {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .glass-pane::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .glass-pane:hover::before {
            left: 100%;
        }

        /* Card Hover Effects */
        .home-card { 
            transition: all 0.4s var(--ease-out-quint);
            width: 480px;
            height: 320px;
            max-width: 480px;
            min-width: 480px;
            min-height: 320px;
            position: relative;
            transform-style: preserve-3d;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            padding: 2.5rem !important;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .home-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(120, 119, 198, 0.1) 0%, rgba(255, 119, 198, 0.05) 100%);
            border-radius: inherit;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }
        
        .home-card:hover { 
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        .home-card:hover::before {
            opacity: 1;
        }
        
        /* Responsive Grid */
        .responsive-grid {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 3rem;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        @media (min-width: 768px) {
            .responsive-grid {
                flex-direction: row;
                justify-content: center;
                gap: 4rem;
            }
        }
        
        @media (max-width: 768px) {
            .responsive-grid {
                gap: 2rem;
                padding: 1rem;
            }
            
            .home-card {
                width: 350px;
                height: 280px;
                max-width: 350px;
                min-width: 350px;
                min-height: 280px;
                padding: 2rem !important;
            }
        }
        
        /* Wheel Container Responsive */
        .wheel-container { 
            position: relative; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            width: 100%; 
            max-width: min(400px, 80vw); 
            aspect-ratio: 1 / 1; 
            border-radius: 50%; 
            padding: 10px; 
            margin: 0 auto;
        }
        
        canvas { 
            width: 100%; 
            height: 100%; 
            border-radius: 50%; 
        }
        
        .pointer { 
            position: absolute; 
            top: -10px; 
            left: 50%; 
            transform: translateX(-50%); 
            width: 0; 
            height: 0; 
            border-left: clamp(15px, 4vw, 25px) solid transparent; 
            border-right: clamp(15px, 4vw, 25px) solid transparent; 
            border-top: clamp(25px, 6vw, 40px) solid #f59e0b; 
            z-index: 10; 
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.6)); 
            will-change: transform; 
        }
        
        @keyframes wobble { 
            0%, 100% { transform: translateX(-50%) rotate(0deg); } 
            25% { transform: translateX(-50%) rotate(5deg); } 
            50% { transform: translateX(-50%) rotate(-5deg); } 
            75% { transform: translateX(-50%) rotate(2deg); } 
        }
        
        .pointer.wobble { 
            animation: wobble 0.5s ease-in-out; 
        }

        /* Button Responsive Styles */
        .button-base { 
            transition: all 0.4s var(--ease-out-quint); 
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 8px 25px rgba(0,0,0,0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2); 
            color: #fff; 
            position: relative; 
            overflow: hidden; 
            font-weight: 600; 
            border-radius: 16px; 
            will-change: transform, box-shadow;
            padding: clamp(0.75rem, 3vw, 1rem) clamp(1.5rem, 5vw, 2.5rem);
            font-size: clamp(1rem, 3vw, 1.5rem);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .button-base::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .button-base:hover { 
            transform: translateY(-6px) scale(1.05); 
            box-shadow: 
                0 15px 35px rgba(0,0,0,0.4),
                0 0 0 1px rgba(255, 255, 255, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3); 
        }
        
        .button-base:hover::before {
            left: 100%;
        }
        
        .button-base:active { 
            transform: translateY(-2px) scale(1.02); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); 
        }
        
        .button-base:disabled { 
            opacity: 0.5; 
            cursor: not-allowed; 
            transform: translateY(0); 
            box-shadow: 0 4px 6px rgba(0,0,0,0.2); 
        }
        
        .spin-button { 
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%);
            box-shadow: 
                0 8px 25px rgba(245, 158, 11, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        .spin-button:hover {
            background: linear-gradient(135deg, #fcd34d 0%, #fbbf24 50%, #f59e0b 100%);
            box-shadow: 
                0 15px 35px rgba(245, 158, 11, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }
        
        #globalReset { 
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 50%, #b91c1c 100%);
            box-shadow: 
                0 8px 25px rgba(239, 68, 68, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        #globalReset:hover {
            background: linear-gradient(135deg, #f87171 0%, #ef4444 50%, #dc2626 100%);
            box-shadow: 
                0 15px 35px rgba(239, 68, 68, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }
        
        #fastComplete { 
            background: linear-gradient(135deg, #16a34a 0%, #15803d 50%, #166534 100%);
            box-shadow: 
                0 8px 25px rgba(22, 163, 74, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        #fastComplete:hover {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 50%, #15803d 100%);
            box-shadow: 
                0 15px 35px rgba(22, 163, 74, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        /* Match Cards and Lists Responsive */
        .match-card { 
            border-radius: 12px; 
            padding: clamp(1rem, 3vw, 1.5rem);
            margin-bottom: 1rem;
        }
        
        .chosen-teams-list { 
            border-radius: 12px; 
            padding: clamp(0.75rem, 2vw, 1rem); 
        }
        
        .chosen-teams-list ul li, 
        .chosen-team-item { 
            background-color: rgba(255, 255, 255, 0.1); 
            color: #e5e7eb; 
            font-weight: 500; 
            padding: clamp(0.25rem, 1vw, 0.5rem) clamp(0.5rem, 2vw, 0.75rem); 
            border-radius: 9999px; 
            font-size: clamp(0.75rem, 2vw, 0.875rem); 
            margin: 0.25rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .chosen-team-item:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        /* Bottom Navigation Responsive */
        .bottom-nav {
            position: fixed;
            bottom: clamp(1rem, 3vw, 1.5rem);
            left: 50%;
            z-index: 50;
            transform: translateX(-50%);
            animation: float-bob 3s ease-in-out infinite;
            width: auto;
            max-width: calc(100vw - 2rem);
        }

        @keyframes float-bob {
            0%   { transform: translateX(-50%) translateY(0px); }
            50%  { transform: translateX(-50%) translateY(-6px); }
            100% { transform: translateX(-50%) translateY(0px); }
        }

        .nav-button {
            display: flex; 
            align-items: center; 
            gap: clamp(0.5rem, 2vw, 0.75rem); 
            padding: clamp(0.5rem, 2vw, 0.75rem) clamp(1rem, 3vw, 1.5rem); 
            border-radius: 9999px; 
            color: #e5e7eb; 
            font-weight: 600;
            font-size: clamp(0.875rem, 2.5vw, 1rem);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            white-space: nowrap;
        }
        
        .nav-button:hover {
            background-color: rgba(55, 65, 81, 0.7);
            box-shadow: 0 12px 25px rgba(0,0,0,0.4);
        }
        
        .nav-button svg {
            width: clamp(16px, 4vw, 20px);
            height: clamp(16px, 4vw, 20px);
            flex-shrink: 0;
        }
        
        /* Mobile Specific Adjustments */
        @media (max-width: 640px) {
            .page {
                padding: 0.5rem;
            }
            
            .nav-button span {
                display: none;
            }
            
            .nav-button {
                padding: 0.75rem;
                border-radius: 50%;
                width: 3rem;
                height: 3rem;
                justify-content: center;
            }
            
            .bottom-nav {
                bottom: 1rem;
            }
        }
    </style>
</head>
<body class="antialiased">

    <div id="landing-section" class="page">
         <header class="text-center mb-12 w-full max-w-4xl">
            <h1 class="responsive-title font-extrabold tracking-tight">
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-emerald-400">
                    Futbol Sim√ºlasyon Merkezi
                </span>
            </h1>
            <p class="text-gray-300 mt-4 responsive-subtitle">Bir mod se√ßerek devam et.</p>
        </header>
        <main class="responsive-grid">
            <div onclick="showPage('home')" class="home-card glass-pane flex flex-col items-center text-center cursor-pointer">
                <div class="icon-enhanced icon-football mb-6 text-8xl">‚öΩ</div>
                <h2 class="responsive-subtitle font-bold mb-3">FC 26 Fikst√ºr Olu≈üturucu</h2>
                <p class="text-gray-400 responsive-text">Kul√ºp takƒ±mlarƒ±yla kendi turnuvanƒ± olu≈ütur.</p>
            </div>
            <div onclick="alert('Bu mod yakƒ±nda eklenecektir!')" class="home-card glass-pane flex flex-col items-center text-center cursor-pointer opacity-50 cursor-not-allowed">
                <div class="icon-enhanced icon-world mb-6 text-8xl">üåç</div>
                <h2 class="responsive-subtitle font-bold mb-3">2026 D√ºnya Kupasƒ± Sim√ºlat√∂r√º</h2>
                <p class="text-gray-400 responsive-text">Milli takƒ±mlarla turnuva heyecanƒ±nƒ± ya≈üa. (Yakƒ±nda)</p>
            </div>
        </main>
    </div>

    <div id="home-section" class="page hidden flex-col items-center justify-center p-4">
        <!-- Mod Se√ßim Ekranƒ± Buraya Gelecek -->
    </div>

    <div id="game-section" class="page hidden">
        <!-- Oyun ekranƒ± buraya gelecek -->
    </div>

    <script>
        const landingSection = document.getElementById('landing-section');
        const homeSection = document.getElementById('home-section');
        const gameSection = document.getElementById('game-section');
        
        const allPages = [landingSection, homeSection, gameSection];

        function showPage(pageName) {
            const targetPage = document.getElementById(`${pageName}-section`);

            allPages.forEach(page => {
                if (page !== targetPage && !page.classList.contains('hidden')) {
                    page.classList.add('page-exit');
                }
            });

            setTimeout(() => {
                allPages.forEach(page => {
                    if (page !== targetPage) {
                        page.classList.add('hidden');
                        if(page === gameSection) gameSection.innerHTML = ''; // Temizle
                    }
                });
                targetPage.classList.remove('hidden', 'page-exit');
                targetPage.classList.add('page-enter');

                if(pageName === 'home') {
                    buildHomePage();
                }
            }, 400);
        }

        function buildHomePage() {
             homeSection.innerHTML = `
                <header class="text-center mb-12 w-full max-w-4xl">
                    <h1 class="responsive-title font-extrabold tracking-tight">
                        <span class="bg-clip-text text-transparent bg-gradient-to-r from-amber-300 to-orange-600">
                            FC 26 Fikst√ºr Olu≈üturucu
                        </span>
                    </h1>
                    <p class="text-gray-300 mt-4 responsive-subtitle">Oyun modunu se√ßerek ba≈üla!</p>
                </header>
                <main class="responsive-grid">
                    <div onclick="initGame('svm')" class="home-card glass-pane p-8 flex flex-col items-center text-center cursor-pointer">
                        <div class="text-6xl mb-4">üèÜ<span class="text-cyan-400">‚ö°</span></div>
                        <h2 class="responsive-subtitle font-bold mb-2">G√º√ßl√º vs. Orta</h2>
                        <p class="text-gray-400 responsive-text">Bir g√º√ßl√º takƒ±m ile bir orta √∂l√ßekli takƒ±mƒ± e≈üle≈ütirerek fikst√ºr olu≈ütur.</p>
                    </div>
                    <div onclick="initGame('svs')" class="home-card glass-pane p-8 flex flex-col items-center text-center cursor-pointer">
                        <div class="text-6xl mb-4">üèÜ<span class="text-amber-400">üèÜ</span></div>
                        <h2 class="responsive-subtitle font-bold mb-2">G√º√ßl√º vs. G√º√ßl√º</h2>
                        <p class="text-gray-400 responsive-text">Sadece en iyilerin kapƒ±≈ütƒ±ƒüƒ± bir devler ligi fikst√ºr√º olu≈ütur.</p>
                    </div>
                </main>
                <div class="bottom-nav">
                    <button onclick="showPage('landing')" class="nav-button glass-pane">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                        <span>Ana Men√ºye D√∂n</span>
                    </button>
                </div>
            `;
        }
        
        function initGame(mode) {
            const config = getModeConfig(mode);
            gameSection.innerHTML = generateGameHTML(config);
            runGame(config);
            showPage('game');
        }

        function getModeConfig(mode) {
            if (mode === 'svm') { return { mode: 'svm', title: 'G√º√ßl√º vs. Orta', numMatches: 11, strongTeams: ['Real Madrid', 'Man City', 'Arsenal', 'Bayern M√ºnih', 'PSG', 'Liverpool', 'Barcelona', 'Inter Milan', 'Juventus', 'Chelsea', 'Man United'], mediumTeams: ['Dortmund', 'Bayer 04', 'Tottenham', 'Napoli', 'Aston Villa', 'A. Bilbao', 'Newcastle', 'Benfica', 'AC Milan', 'Fenerbah√ße', 'Atl√©tico Madrid'], hasMediumWheel: true }; } 
            else if (mode === 'svs') { return { mode: 'svs', title: 'G√º√ßl√º vs. G√º√ßl√º', numMatches: 6, strongTeams: ['Real Madrid', 'Man City', 'Arsenal', 'Bayern M√ºnih', 'PSG', 'Liverpool', 'Barcelona', 'Inter Milan', 'Juventus', 'Chelsea', 'Man United', 'Atl√©tico Madrid'], mediumTeams: null, hasMediumWheel: false }; }
        }

        function generateGameHTML(config) {
            let wheelHTML = `<div class="flex flex-col items-center space-y-8 w-full max-w-md mx-auto"><h2 class="responsive-subtitle font-bold text-gray-100 flex items-center justify-center gap-3 text-center"><span class="icon-enhanced icon-trophy">üèÜ</span> G√º√ßl√º Takƒ±mlar</h2><div class="wheel-container glass-pane"><div class="pointer"></div><canvas id="strongWheel" width="500" height="500"></canvas></div><button id="spinStrong" class="button-base spin-button w-full">√áEVƒ∞R</button><div class="w-full mt-2 chosen-teams-list glass-pane"><h3 class="text-gray-300 responsive-text font-semibold mb-3 text-center">√áƒ±kan Takƒ±mlar</h3><ul id="strongChosenList" class="flex flex-wrap justify-center gap-2 min-h-[2rem]"></ul></div></div>`;
        if (config.hasMediumWheel) { wheelHTML += `<div class="flex flex-col items-center space-y-8 w-full max-w-md mx-auto"><h2 class="responsive-subtitle font-bold text-gray-100 flex items-center justify-center gap-3 text-center"><span class="icon-enhanced icon-lightning">‚ö°</span> Orta √ñl√ßekli Takƒ±mlar</h2><div class="wheel-container glass-pane"><div class="pointer"></div><canvas id="mediumWheel" width="500" height="500"></canvas></div><button id="spinMedium" class="button-base spin-button w-full">√áEVƒ∞R</button><div class="w-full mt-2 chosen-teams-list glass-pane"><h3 class="text-gray-300 responsive-text font-semibold mb-3 text-center">√áƒ±kan Takƒ±mlar</h3><ul id="mediumChosenList" class="flex flex-wrap justify-center gap-2 min-h-[2rem]"></ul></div></div>`; }
            let matchCardsHTML = '';
            for (let i = 1; i <= config.numMatches; i++) {
                const team2Color = config.hasMediumWheel ? 'text-cyan-400' : 'text-amber-400';
                matchCardsHTML += `<div id="matchCard${i}" class="match-card glass-pane transition-all duration-300"><h3 class="text-center text-gray-400 font-semibold mb-2 responsive-text">${i}. MA√á</h3><div class="flex items-center justify-between responsive-text font-bold"><span id="match${i}_team1" class="text-amber-400 w-2/5 text-center">...</span><span class="text-gray-500 text-xl">VS</span><span id="match${i}_team2" class="${team2Color} w-2/5 text-center">...</span></div></div>`;
            }
            return `<div class="container mx-auto px-4 py-8 pb-32 w-full"><header class="text-center mb-8"><h1 class="responsive-title font-extrabold tracking-tight"><span class="bg-clip-text text-transparent bg-gradient-to-r from-amber-300 to-orange-600">${config.title}</span></h1></header><main class="grid grid-cols-1 ${config.hasMediumWheel ? 'lg:grid-cols-2' : ''} justify-items-center gap-16 lg:gap-10 items-start w-full mb-12">${wheelHTML}</main><section class="my-12"><div id="matchList" class="space-y-4 max-w-3xl mx-auto">${matchCardsHTML}</div><div class="text-center mt-6 flex flex-wrap justify-center gap-4"><button id="fastComplete" class="button-base">Hƒ±zlƒ± Tamamla</button><button id="globalReset" class="button-base">T√úM√úN√ú SIFIRLA</button></div></section></div><div class="bottom-nav"><button onclick="showPage('home')" class="nav-button glass-pane"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg><span>Mod Se√ßimine D√∂n</span></button></div>`;
        }
        
        function runGame(config) {
            const strongColors = ['#0D47A1', '#FFC107', '#B0BEC5', '#D32F2F', '#212121', '#F5F5F5', '#004D40', '#BF360C', '#4A148C', '#01579B', '#DA291C', '#CB3524'];
            const mediumColors = ['#FBC02D', '#283593', '#C2185B', '#F57C00', '#00796B', '#512DA8', '#E64A19', '#303F9F', '#7B1FA2', '#0288D1', '#FB090B', '#000080'];
            let activeStrongTeams, chosenStrongTeams, activeMediumTeams, chosenMediumTeams, currentMatchIndex, matches, isFirstSpinOfPair;
            const tickSound = new Tone.MembraneSynth({ pitchDecay: 0.01, octaves: 2, envelope: { attack: 0.001, decay: 0.2, sustain: 0 } }).toDestination();
            const winSound = new Tone.PolySynth(Tone.Synth, { oscillator: { type: 'triangle' }, envelope: { attack: 0.01, decay: 0.3, sustain: 0.2, release: 0.4 } }).toDestination();
            const strongOffscreenCanvas = document.createElement('canvas'); strongOffscreenCanvas.width = 500; strongOffscreenCanvas.height = 500;
            const wheels = { strong: { canvas: document.getElementById('strongWheel'), offscreenCanvas: strongOffscreenCanvas, button: document.getElementById('spinStrong'), teams: null, colors: strongColors, currentAngle: 0, isSpinning: false, needsRedraw: true },};
            if (config.hasMediumWheel) { const mediumOffscreenCanvas = document.createElement('canvas'); mediumOffscreenCanvas.width = 500; mediumOffscreenCanvas.height = 500; wheels.medium = { canvas: document.getElementById('mediumWheel'), offscreenCanvas: mediumOffscreenCanvas, button: document.getElementById('spinMedium'), teams: null, colors: mediumColors, currentAngle: 0, isSpinning: false, needsRedraw: true };}
            function createWheelImage(wheel) {
                 if (!wheel || !wheel.needsRedraw) return; const teams = wheel.teams; const numSegments = teams.length; const ctx = wheel.offscreenCanvas.getContext('2d'); const radius = wheel.offscreenCanvas.width / 2; ctx.clearRect(0, 0, wheel.offscreenCanvas.width, wheel.offscreenCanvas.height);
                if (numSegments === 0) { ctx.fillStyle = 'rgba(17, 24, 39, 0.1)'; ctx.beginPath(); ctx.arc(radius, radius, radius - 5, 0, 2 * Math.PI); ctx.fill(); wheel.needsRedraw = false; return; }
                const anglePerSegment = (2 * Math.PI) / numSegments;
                for (let i = 0; i < numSegments; i++) { const angle = i * anglePerSegment; ctx.save(); ctx.translate(radius, radius); ctx.beginPath(); ctx.fillStyle = wheel.colors[i % wheel.colors.length]; ctx.moveTo(0, 0); ctx.arc(0, 0, radius - 5, angle, angle + anglePerSegment); ctx.closePath(); ctx.fill(); ctx.strokeStyle = '#111827'; ctx.lineWidth = 6; ctx.stroke(); ctx.rotate(angle + anglePerSegment / 2); ctx.textAlign = 'right'; const segmentColor = wheel.colors[i % wheel.colors.length]; const isLightColor = ['#F5F5F5', '#B0BEC5', '#FFC107', '#FBC02D'].includes(segmentColor); ctx.fillStyle = isLightColor ? '#1e293b' : '#ffffff'; ctx.font = `bold ${numSegments > 14 ? '20px' : (numSegments > 10 ? '22px' : '26px')} Poppins`; ctx.fillText(teams[i], radius - 25, 8); ctx.restore(); }
                wheel.needsRedraw = false;
            }
            function drawWheel(wheel) { if(!wheel) return; const ctx = wheel.canvas.getContext('2d'); const radius = wheel.canvas.width / 2; ctx.clearRect(0, 0, wheel.canvas.width, wheel.canvas.height); ctx.save(); ctx.translate(radius, radius); ctx.rotate(wheel.currentAngle); ctx.drawImage(wheel.offscreenCanvas, -radius, -radius); ctx.restore(); }
            function updateChosenList() { const strongList = document.getElementById('strongChosenList'); strongList.innerHTML = ''; if(chosenStrongTeams.length > 0) chosenStrongTeams.forEach(t => { const li = document.createElement('li'); li.textContent=t; li.className='chosen-team-item'; strongList.appendChild(li); }); if(config.hasMediumWheel) { const mediumList = document.getElementById('mediumChosenList'); mediumList.innerHTML = ''; if(chosenMediumTeams.length > 0) chosenMediumTeams.forEach(t => { const li = document.createElement('li'); li.textContent=t; li.className='chosen-team-item'; mediumList.appendChild(li); });}}
            function updateMatchUI() { matches.forEach((match, index) => { const team1El = document.getElementById(`match${index + 1}_team1`); const team2El = document.getElementById(`match${index + 1}_team2`); const cardEl = document.getElementById(`matchCard${index + 1}`); team1El.textContent = match.team1 || '...'; team2El.textContent = match.team2 || '...'; if ((match.team1 && match.team2) || index === currentMatchIndex) cardEl.classList.remove('opacity-50'); else cardEl.classList.add('opacity-50'); }); }
            function updateButtonStates() {
                const { strong, medium } = wheels; const fastCompleteBtn = document.getElementById('fastComplete'); const isSvsMode = !config.hasMediumWheel;
                if ((isSvsMode && activeStrongTeams.length < 2) || currentMatchIndex >= matches.length || (config.hasMediumWheel && (activeStrongTeams.length === 0 || activeMediumTeams.length === 0))) {
                     strong.button.disabled = true; if(medium) medium.button.disabled = true; fastCompleteBtn.disabled = true; return; 
                }
                const currentMatch = matches[currentMatchIndex]; const anySpinning = strong.isSpinning || (medium && medium.isSpinning);
                if (isSvsMode) { strong.button.disabled = anySpinning || activeStrongTeams.length === 0; } else { strong.button.disabled = anySpinning || currentMatch.team1 !== null || activeStrongTeams.length === 0; medium.button.disabled = anySpinning || currentMatch.team2 !== null || activeMediumTeams.length === 0; }
                fastCompleteBtn.disabled = anySpinning;
            }
            function spin(wheelKey) {
                const wheel = wheels[wheelKey]; if (wheel.isSpinning || wheel.teams.length === 0) return; wheel.isSpinning = true; updateButtonStates();
                const spinAngleStart = wheel.currentAngle; 
                const spinTimeTotal = (Math.random() * 2000) + 5000; 
                const totalRotations = (Math.random() * 5 + 8) * (2 * Math.PI); const spinAngleEnd = spinAngleStart + totalRotations; const startTime = performance.now(); let lastAngle = spinAngleStart, tickAccumulator = 0;
                function rotateWheel(time) {
                    const timeElapsed = time - startTime; if (timeElapsed >= spinTimeTotal) { wheel.currentAngle = spinAngleEnd; stopSpinning(); return; }
                    const progress = timeElapsed / spinTimeTotal; const easeOut = 1 - Math.pow(1 - progress, 4); wheel.currentAngle = spinAngleStart + (spinAngleEnd - spinAngleStart) * easeOut; const deltaAngle = Math.abs(wheel.currentAngle - lastAngle); tickAccumulator += deltaAngle; const anglePerSegment = (2 * Math.PI) / wheel.teams.length;
                    if (tickAccumulator > anglePerSegment) { try { tickSound.triggerAttackRelease('C2', '8n', Tone.now() + 0.01); } catch(e) {} tickAccumulator -= anglePerSegment; }
                    lastAngle = wheel.currentAngle; drawWheel(wheel); requestAnimationFrame(rotateWheel);
                }
                requestAnimationFrame(rotateWheel);
                function stopSpinning() {
                    const pointer = wheel.canvas.parentElement.querySelector('.pointer'); pointer.classList.add('wobble'); setTimeout(() => pointer.classList.remove('wobble'), 500);
                    const totalSegments = wheel.teams.length; const anglePerSegment = 360 / totalSegments; const finalAngle = (wheel.currentAngle * 180 / Math.PI) % 360; let winningAngle = (270 - finalAngle + 360) % 360; const winnerIndex = Math.floor(winningAngle / anglePerSegment); const winner = wheel.teams[winnerIndex];
                    if (config.hasMediumWheel) { matches[currentMatchIndex][wheelKey === 'strong' ? 'team1' : 'team2'] = winner; } else { if (isFirstSpinOfPair) matches[currentMatchIndex].team1 = winner; else matches[currentMatchIndex].team2 = winner; }
                    if (wheelKey === 'strong') { chosenStrongTeams.push(winner); activeStrongTeams = activeStrongTeams.filter(t => t !== winner); wheel.teams = activeStrongTeams; } 
                    else if (config.hasMediumWheel) { chosenMediumTeams.push(winner); activeMediumTeams = activeMediumTeams.filter(t => t !== winner); wheels.medium.teams = activeMediumTeams; }
                    wheel.needsRedraw = true; createWheelImage(wheel); drawWheel(wheel); updateChosenList();
                    if ((config.hasMediumWheel && matches[currentMatchIndex].team1 && matches[currentMatchIndex].team2) || (!config.hasMediumWheel && !isFirstSpinOfPair)) { currentMatchIndex++; }
                    if(!config.hasMediumWheel) isFirstSpinOfPair = !isFirstSpinOfPair;
                    updateMatchUI(); wheel.isSpinning = false; updateButtonStates(); try { winSound.triggerAttackRelease(['C4', 'E4', 'G4'], '8n', Tone.now()); } catch (e) {}
                }
            }
            function fastCompleteMatches() {
                 if (Tone.context.state !== 'running') Tone.start();
                 while(currentMatchIndex < matches.length) {
                     if (config.hasMediumWheel) {
                         if (activeStrongTeams.length === 0 || activeMediumTeams.length === 0) break;
                         const sIndex = Math.floor(Math.random() * activeStrongTeams.length); const sWinner = activeStrongTeams[sIndex]; matches[currentMatchIndex].team1 = sWinner; chosenStrongTeams.push(sWinner); activeStrongTeams.splice(sIndex, 1);
                         const mIndex = Math.floor(Math.random() * activeMediumTeams.length); const mWinner = activeMediumTeams[mIndex]; matches[currentMatchIndex].team2 = mWinner; chosenMediumTeams.push(mWinner); activeMediumTeams.splice(mIndex, 1);
                     } else { 
                         if (activeStrongTeams.length < 2) break;
                         const r1 = Math.floor(Math.random() * activeStrongTeams.length); const w1 = activeStrongTeams[r1]; matches[currentMatchIndex].team1 = w1; chosenStrongTeams.push(w1); activeStrongTeams.splice(r1, 1);
                         const r2 = Math.floor(Math.random() * activeStrongTeams.length); const w2 = activeStrongTeams[r2]; matches[currentMatchIndex].team2 = w2; chosenStrongTeams.push(w2); activeStrongTeams.splice(r2, 1);
                     }
                     currentMatchIndex++;
                 }
                 wheels.strong.teams = activeStrongTeams; wheels.strong.needsRedraw = true; createWheelImage(wheels.strong); drawWheel(wheels.strong);
                 if (config.hasMediumWheel) { wheels.medium.teams = activeMediumTeams; wheels.medium.needsRedraw = true; createWheelImage(wheels.medium); drawWheel(wheels.medium); updateChosenList(); }
                 updateChosenList(); updateMatchUI(); updateButtonStates(); try { winSound.triggerAttackRelease(['C4', 'E4', 'G4', 'C5'], '4n', Tone.now()); } catch (e) {}
            }
            function resetAll() {
                activeStrongTeams = [...config.strongTeams]; chosenStrongTeams = []; wheels.strong.teams = activeStrongTeams; wheels.strong.needsRedraw = true;
                if (config.hasMediumWheel) { activeMediumTeams = [...config.mediumTeams]; chosenMediumTeams = []; wheels.medium.teams = activeMediumTeams; wheels.medium.needsRedraw = true; }
                currentMatchIndex = 0; isFirstSpinOfPair = true;
                matches = Array.from({ length: config.numMatches }, () => ({ team1: null, team2: null }));
                createWheelImage(wheels.strong); drawWheel(wheels.strong);
                if (config.hasMediumWheel) { createWheelImage(wheels.medium); drawWheel(wheels.medium); updateChosenList(); }
                updateChosenList(); updateMatchUI(); updateButtonStates();
            }
            document.getElementById('globalReset').addEventListener('click', resetAll); document.getElementById('fastComplete').addEventListener('click', fastCompleteMatches);
            wheels.strong.button.addEventListener('click', () => { if (Tone.context.state !== 'running') Tone.start(); spin('strong'); });
            if (config.hasMediumWheel) wheels.medium.button.addEventListener('click', () => { if (Tone.context.state !== 'running') Tone.start(); spin('medium'); });
            resetAll();
        }
    </script>
</body>
</html>

